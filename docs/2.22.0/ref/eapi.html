
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>eapi &#8212; Arista EOS SDK 2.22.0 reference</title>
    <link rel="stylesheet" href="_static/eossdk.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/breathe.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="eapi_impl" href="eapi_impl.html" />
    <link rel="prev" title="directflow_impl" href="directflow_impl.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="eapi_impl.html" title="eapi_impl"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="directflow_impl.html" title="directflow_impl"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Arista EOS SDK 2.22.0 reference</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="eapi">
<h1><strong>eapi</strong><a class="headerlink" href="#eapi" title="Permalink to this headline">¶</a></h1>
<p>EOS eAPI interaction module. This module allows interaction with the CLI via eAPI command requests. This allows EOS SDK applications access to configuration and status of EOS state for which EOS SDK APIs do not yet exist. Note that each method is a synchronous call, and opens a unix-domain socket. Therefore, this is not intended to be a replacement for other EosSdk modules.</p>
<p>For more information about eAPI, please visit <a class="reference external" href="https://eos.arista.com/arista-eapi-101/">https://eos.arista.com/arista-eapi-101/</a></p>
<p>The following snippet shows how to load an eAPI response into a json_t object from the jansson library, although any json library to convert from json-formatted text will do. Based on the jansson library documentation: <a class="reference external" href="https://jansson.readthedocs.io/en/2.10/tutorial.html">https://jansson.readthedocs.io/en/2.10/tutorial.html</a>  <div class="highlight-default notranslate"><div class="highlight"><pre><span></span>eapi_response_t show_interfaces = eapiMgr-&gt;run_show_cmd(&quot;show interfaces&quot;);
json_t* root;
json_error_t error;
if (show_interfaces.success()) {
   root = json_loads(show_interfaces.responses()[0], 0, &amp;error);
}
if (!root) {
   fprintf(stderr, &quot;error: on line %d: %s\n&quot;, error.line, error.text);
}
json_t* interfaces = json_object_get(root, &quot;interfaces&quot;);
json_t* intf1 = json_object_get(interfaces, &quot;Ethernet1&quot;);
json_t* desc1 = json_object_get(intf1, &quot;description&quot;);

printf(&quot;Ethernet1&#39;s description: &quot; &lt;&lt; json_string_value(desc1));
...
</pre></div>
</div>
</p>
<dl class="namespace">
<dt>
<span class="target" id="eossdknamespaceeos"></span><em>namespace</em> <code class="descname">eos</code></dt>
<dd><dl class="class">
<dt>
<span class="target" id="eossdkclasseos_1_1eapi__mgr"></span><em>class</em> <code class="descname">eapi_mgr</code></dt>
<dd><em>#include &lt;eapi.h&gt;</em><p>eAPI manager. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="function">
<dt>
<span class="target" id="eossdkclasseos_1_1eapi__mgr_1ad85f2c1eecfb862c66314f2e036350b1"></span>virtual <code class="descname">~eapi_mgr</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="function">
<dt>
<span class="target" id="eossdkclasseos_1_1eapi__mgr_1a39ae8ccafb8c5041ed792c8dfd58c97a"></span>virtual <a class="reference internal" href="#eossdkclasseos_1_1eapi__response__t"><span class="std std-ref">eapi_response_t</span></a> <code class="descname">run_show_cmd</code><span class="sig-paren">(</span>std::string const &amp;<span class="sig-paren">)</span> const = 0</dt>
<dd><p>Executes a “show” CLI command in enable mode. </p>
</dd></dl>

<dl class="function">
<dt>
<span class="target" id="eossdkclasseos_1_1eapi__mgr_1a41897a491a87242b36d369fcaef04e2f"></span>virtual <a class="reference internal" href="#eossdkclasseos_1_1eapi__response__t"><span class="std std-ref">eapi_response_t</span></a> <code class="descname">run_config_cmds</code><span class="sig-paren">(</span>std::vector&lt; std::string &gt; const &amp;<span class="sig-paren">)</span> const = 0</dt>
<dd><p>Executes one or many CLI commands in configuration mode. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Protected Functions</p>
<dl class="function">
<dt>
<span class="target" id="eossdkclasseos_1_1eapi__mgr_1a481e31cf6ad904edd3feb0c941f8ca46"></span><code class="descname">eapi_mgr</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Private Members</p>
<dl class="variable">
<dt>
<span class="target" id="eossdkclasseos_1_1eapi__mgr_1af4db9732606cdc1bde01e06d1b272dd0"></span><code class="descname">eapi_mgr</code></dt>
<dd></dd></dl>

</div>
</dd></dl>

</dd></dl>

<div class="section" id="type-definitions-in-eapi">
<h2>Type definitions in <strong>eapi</strong><a class="headerlink" href="#type-definitions-in-eapi" title="Permalink to this headline">¶</a></h2>
<dl class="namespace">
<dt>
<span class="target" id="eossdknamespaceeos"></span><em>namespace</em> <code class="descname">eos</code></dt>
<dd><dl class="class">
<dt>
<span class="target" id="eossdkclasseos_1_1eapi__response__t"></span><em>class</em> <code class="descname">eapi_response_t</code></dt>
<dd><em>#include &lt;eapi.h&gt;</em><p>An eAPI response from the Cli server. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="function">
<dt>
<span class="target" id="eossdkclasseos_1_1eapi__response__t_1a01faf62702ea072302de3637ffde9664"></span><code class="descname">eapi_response_t</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Default constructor. </p>
</dd></dl>

<dl class="function">
<dt>
<span class="target" id="eossdkclasseos_1_1eapi__response__t_1a0f310f846e1424a1c7f29cdc5dc0542e"></span><code class="descname">eapi_response_t</code><span class="sig-paren">(</span>bool <em>success</em>, uint32_t <em>error_code</em>, std::string const &amp; <em>error_message</em>, std::vector&lt; std::string &gt; const &amp; <em>responses</em><span class="sig-paren">)</span></dt>
<dd><p>Full constructor. </p>
</dd></dl>

<dl class="function">
<dt>
<span class="target" id="eossdkclasseos_1_1eapi__response__t_1a5c3ce7aff0af11bccc6d4aa421233a58"></span><code class="descname">eapi_response_t</code><span class="sig-paren">(</span>const <a class="reference internal" href="#eossdkclasseos_1_1eapi__response__t"><span class="std std-ref">eapi_response_t</span></a> &amp; <em>other</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="function">
<dt>
<span class="target" id="eossdkclasseos_1_1eapi__response__t_1ab04efe4fdb6d44ebdb50430d0711e99b"></span><a class="reference internal" href="#eossdkclasseos_1_1eapi__response__t"><span class="std std-ref">eapi_response_t</span></a> &amp; <code class="descname">operator=</code><span class="sig-paren">(</span><a class="reference internal" href="#eossdkclasseos_1_1eapi__response__t"><span class="std std-ref">eapi_response_t</span></a> const &amp; <em>other</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="function">
<dt>
<span class="target" id="eossdkclasseos_1_1eapi__response__t_1a888e6db2c7347577f1724c45fa41927a"></span>bool <code class="descname">success</code><span class="sig-paren">(</span><span class="sig-paren">)</span> const</dt>
<dd><p>Getter for ‘success’: indicates if a response was received. </p>
</dd></dl>

<dl class="function">
<dt>
<span class="target" id="eossdkclasseos_1_1eapi__response__t_1a092dde2a7e4774fbb74bcbf46ac7e9a4"></span>uint32_t <code class="descname">error_code</code><span class="sig-paren">(</span><span class="sig-paren">)</span> const</dt>
<dd><p>Getter for ‘error_code’: error code from eAPI response. </p>
</dd></dl>

<dl class="function">
<dt>
<span class="target" id="eossdkclasseos_1_1eapi__response__t_1af789ea0638b438822968f5b7afc7747b"></span>std::string <code class="descname">error_message</code><span class="sig-paren">(</span><span class="sig-paren">)</span> const</dt>
<dd><p>Getter for ‘error_message’: error message from response. </p>
</dd></dl>

<dl class="function">
<dt>
<span class="target" id="eossdkclasseos_1_1eapi__response__t_1abac91b756c1d486e508a6779af06eb08"></span>std::vector&lt; std::string &gt; const &amp; <code class="descname">responses</code><span class="sig-paren">(</span><span class="sig-paren">)</span> const</dt>
<dd><p>Getter for ‘responses’: the set of strings that constitute an eAPI response. </p>
</dd></dl>

<dl class="function">
<dt>
<span class="target" id="eossdkclasseos_1_1eapi__response__t_1acf90078fce75e85726ceb2cbaadaf141"></span>std::string <code class="descname">raw_response</code><span class="sig-paren">(</span><span class="sig-paren">)</span> const</dt>
<dd><p>Getter for ‘raw_response’: raw eAPI response (if requested). </p>
</dd></dl>

<dl class="function">
<dt>
<span class="target" id="eossdkclasseos_1_1eapi__response__t_1a2023ab0a9690cf9757964f46d4da82eb"></span>std::string <code class="descname">to_string</code><span class="sig-paren">(</span><span class="sig-paren">)</span> const</dt>
<dd><p>Returns a string representation of the current object’s values. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Private Members</p>
<dl class="variable">
<dt>
<span class="target" id="eossdkclasseos_1_1eapi__response__t_1aaa6d3df0a234b6ff54571a761a5b9a19"></span>std::shared_ptr&lt; <a class="reference internal" href="eapi_impl.html#eossdkclasseos_1_1eapi__response__impl__t"><span class="std std-ref">eapi_response_impl_t</span></a> &gt; <code class="descname">pimpl</code></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Friends</p>
<dl class="friend">
<dt>
<span class="target" id="eossdkclasseos_1_1eapi__response__t_1abb5c159fc1d07ad3d4f9b6d6c5aa4081"></span>friend std::ostream &amp; <code class="descname">operator&lt;&lt;</code></dt>
<dd><p>A utility stream operator that adds a string representation of <a class="reference internal" href="#eossdkclasseos_1_1eapi__response__t"><span class="std std-ref">eapi_response_t</span></a> to the ostream. </p>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><strong>eapi</strong></a><ul>
<li><a class="reference internal" href="#type-definitions-in-eapi">Type definitions in <strong>eapi</strong></a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="directflow_impl.html"
                        title="previous chapter"><strong>directflow_impl</strong></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="eapi_impl.html"
                        title="next chapter"><strong>eapi_impl</strong></a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="eapi_impl.html" title="eapi_impl"
             >next</a> |</li>
        <li class="right" >
          <a href="directflow_impl.html" title="directflow_impl"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Arista EOS SDK 2.22.0 reference</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, Arista Networks.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.
    </div>
  </body>
</html>